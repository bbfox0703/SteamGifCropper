# SteamGifCropper

[繁體中文](./Readme.md) | [English](./Readme_en.md)

SteamGifCropper は **Steam ワークショップのショーケース** 用に作られた小さなツールです。GIF 画像を切り分けたり、調整して Steam プロフィールで横一列に表示できるようにします。GIF ファイルを扱うための補助機能も備えています。

---

## 機能

- **GIF の幅を確認** – ソース GIF の幅は **766px**（推奨）または **774px** に対応。
- **自動分割** – あらかじめ設定された X 範囲に基づいて GIF を 5 つに分割します。
- **高さを 100px 追加** – 分割した各部分の下に **100px** の透明領域を追加。
- **透明色の設定** – 追加領域の下端のピクセルを透明色として使用します。
- **フレーム遅延を保持** – 元のアニメーション速度を維持。
- **GIF バイトを調整** – 最終バイトや高さ情報を修正します。
- **幅 766px にリサイズ** – オプションのリサイズ機能。
- **末尾バイト 0x3B / 0x21 の切り替え** – クイックなバイト変更ツール。
- **5 個の GIF を 1 つに結合** – 幅を約 153px に縮小して結合します。
- **2～5 個の GIF を結合** – 縮小せずに結合。幅は入力ファイルの合計になります。大きいファイルでは遅いことがあります。
- **逆再生 GIF** – GIF を逆順再生に変換。
- **簡易 MP4 → GIF 変換** – ソースファイル、開始時間、長さを指定して変換。
- **gifsicle サポート** – 後処理/最適化のために `gifsicle.exe` を呼び出します。

---

## 動作環境

- **OS**: Windows 10 1904 以降
- **ランタイム**: .NET 8 runtime
- **ライブラリ**: Magick.NET（zip に同梱）
- **FFMPEG**: MP4 機能を利用する場合はインストールし、`PATH` に設定してください。
- **gifsicle.exe**: 別途ダウンロードし、`PATH` に設定してください。

---

## 使い方

### 出力ファイル
分割後、5 つの GIF が次の名前で保存されます。
```
[元のファイル名]_Part1.gif
[元のファイル名]_Part2.gif
[元のファイル名]_Part3.gif
[元のファイル名]_Part4.gif
[元のファイル名]_Part5.gif
```
Steam にアップロードするには各ファイルのサイズを **5MB** 未満にしてください。必要に応じて調整や最適化を行ってください。

### リサイズ
リサイズ機能は簡易的なものです。大きな GIF ではメモリと時間を消費します。

### 2～5 個の GIF を結合
幅は変更せずにそのまま結合する簡単な機能です。メモリ効率が悪く、遅い場合があります。

### 5 個の GIF を 1 つの 766px GIF に結合
各 GIF を約 153px に縮小してから結合します。プレビュー用途を想定しています。

---

## 分割範囲 – **766px**
**150px** 幅、**4px** の隙間

| 部分 | X 範囲 |
|------|---------|
| Part 1 | 0 – 149 |
| Part 2 | 153 – 303 |
| Part 3 | 307 – 457 |
| Part 4 | 461 – 611 |
| Part 5 | 615 – 末尾 |

## 分割範囲 – **774px**
**150px** 幅、**6px** の隙間

| 部分 | X 範囲 |
|------|---------|
| Part 1 | 0 – 149 |
| Part 2 | 155 – 305 |
| Part 3 | 311 – 461 |
| Part 4 | 467 – 617 |
| Part 5 | 623 – 末尾 |

---

## 注意事項

1. ソース GIF の幅は **766px** または **774px** である必要があります。
1. 出力形式は GIF のみで、分割範囲や高さは固定です。
1. Steam のショーケース要件を満たし、各ファイルが 5MB 未満であることを確認してください。
1. 大きな GIF を処理するとメモリを大量に消費する場合があります。
1. 主に 766×432 と 766×353 の GIF でテストされています。

## 既知の問題

- すべての GIF を確実に処理できるわけではありません。
- すべての GIF 作成ツールとの互換性は保証されていません。
- 分割した画像の端に細い黒線が出ることがあります。

---

## 参考: 766px 時のアスペクト比
| 比率 | 出力サイズ (px) |
|------|----------------|
| 4:3    | 766 × 575 |
| 16:9   | 766 × 431 |
| 16:10  | 766 × 479 |
| 19.5:9 | 766 × 353 |
| 21:9   | 766 × 329 |

